(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{420:function(t,e,a){"use strict";a.r(e);var s=a(1),n=a.n(s),o=a(77),r=a(76),i=a(16),c=i.i.reactiveProp,l={extends:i.c,mixins:[c],props:["chartData","options"],mounted:function(){this.renderChart(this.chartData,this.options)}},d=a(6),u=Object(d.a)(l,void 0,void 0,!1,null,null,null).exports;function h(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v={components:{LineChart:o.a,BarChart:r.a,HorizontalBar:u},data:function(){return{types:["BAR","LINE"],type:"LINE",currentTab:0,datas:null,range:!0,showCurrent:!0,pickers:[],pickedString:"",startDate:null,endDate:null,min:null,max:(new Date).toISOString().substr(0,10),date:(new Date).toISOString().substr(0,10),dateFormatted:(new Date).toISOString().substr(0,10),calenderMenu:!1,rangeSidebar:null,rangeSidebars:[],locations:[],location:0,user:0,users:[],tabTypes:["sales","revenues","expenses"],lastestUsers:[],lastestClients:[]}},mounted:function(){this.init(),this.fetchLocations(),this.fetchUsers(),this.fetchReports(),this.fetchLatestUser(),this.fetchLatestClient()},methods:{init:function(){this.startDate=n()().startOf("month").format("YYYY-MM-DD"),this.endDate=n()().format("YYYY-MM-DD"),this.pickedString=n()(this.startDate).format("MMM DD, YYYY")+" - "+n()(this.endDate).format("MMM DD, YYYY"),this.pickers=[this.startDate,this.endDate],this.rangeSidebars=[{text:this.$t("Today"),from:n()().format("YYYY-MM-DD"),to:n()().format("YYYY-MM-DD")},{text:this.$t("Yesterday"),from:n()().subtract(1,"days").format("YYYY-MM-DD"),to:n()().format("YYYY-MM-DD")},{text:this.$t("This week"),from:n()().startOf("week").format("YYYY-MM-DD"),to:n()().format("YYYY-MM-DD")},{text:this.$t("Last week"),from:n()().subtract(14,"days").format("YYYY-MM-DD"),to:n()().subtract(7,"days").format("YYYY-MM-DD")},{text:this.$t("This month"),from:n()().startOf("month").format("YYYY-MM-DD"),to:n()().format("YYYY-MM-DD")},{text:this.$t("Last month"),from:n()().subtract(1,"month").startOf("month").format("YYYY-MM-DD"),to:n()().subtract(1,"month").endOf("month").format("YYYY-MM-DD")},{text:this.$t("Last 7 days"),from:n()().subtract(6,"days").format("YYYY-MM-DD"),to:n()().format("YYYY-MM-DD")},{text:this.$t("Last 30 days"),from:n()().subtract(29,"days").format("YYYY-MM-DD"),to:n()().format("YYYY-MM-DD")}]},onChange:function(t){2==t.length&&(n()(t[0])>n()(t[1])&&(this.pickers=t.reverse()),this.startDate=this.pickers[0],this.endDate=this.pickers[1],this.pickedString=n()(this.startDate).format("MMM DD, YYYY")+" - "+n()(this.endDate).format("MMM DD, YYYY"),console.log(t),this.fetchReports())},onDone:function(){console.log("onDone"),this.calenderMenu=!1},onCancel:function(){console.log("onCancel"),this.calenderMenu=!1},onSelectRange:function(t){this.startDate=t.from,this.endDate=t.to,this.pickers=[t.from,t.to],this.pickedString=n()(this.startDate).format("MMM DD, YYYY")+" - "+n()(this.endDate).format("MMM DD, YYYY"),console.log(t.from,t.to),this.fetchReports()},onNext:function(){console.log("onNext")},onPrevious:function(){console.log("onPrevious")},onChangeLocation:function(){console.log(this.location),this.fetchReports()},fetchReports:function(){var t=this,e=this.tabTypes[this.currentTab],a="/api/reports?from=".concat(this.startDate,"&to=").concat(this.endDate,"&location_id=").concat(this.location,"&user_id=").concat(this.user,"&reportType=").concat(e);axios.get(a).then((function(a){console.log(a.data);var s=a.data;t.datas={labels:s[0],datasets:[{label:t.$t(e),fill:!1,backgroundColor:"red",data:s[1]}]}})).catch((function(t){console.log(t)}))},fetchUsers:function(){var t=this;axios.get("/api/users/selections").then((function(e){console.log(e),t.users=[{id:0,name:"All Users"}].concat(h(e.data))})).catch((function(t){console.log(t)}))},fetchLocations:function(){var t=this;axios.get("/api/locations/selections").then((function(e){console.log(e),t.locations=[{id:0,name:"All Locations"}].concat(h(e.data))})).catch((function(t){console.log(t)}))},fetchLatestUser:function(){var t=this;axios.get("/api/users/latest").then((function(e){console.log(e),t.lastestUsers=e.data})).catch((function(t){console.log(t)}))},fetchLatestClient:function(){var t=this;axios.get("/api/clients/latest").then((function(e){console.log(e),t.lastestClients=e.data})).catch((function(t){console.log(t)}))}}},f=a(13),m=a.n(f),p=a(430),_=a(63),Y=a(96),D=a(4),x=a(431),g=a(417),b=a(102),M=a(90),y=a(438),k=a(99),C=a(64),S=a(5),w=a(101),$=a(104),L=a(433),V=a(82),T=a(118),O=a(435),R=a(436),A=a(439),I=a(47),N=Object(d.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"px-3"},[a("v-row",[a("v-col",{staticStyle:{"max-height":"60px"},attrs:{cols:"12",lg:"4",sm:"12","max-width":"500"}},[a("v-menu",{ref:"calenderMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-text-field",t._g({staticClass:"centered-input",attrs:{solo:"",readonly:""},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[a("v-btn",{staticClass:"pa-0 ma-0",staticStyle:{border:"1px solid grey"},attrs:{text:"",icon:"",color:"text"},on:{click:t.onPrevious}},[a("v-icon",[t._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"append",fn:function(){return[a("v-btn",{staticClass:"pa-0 ma-0",staticStyle:{border:"1px solid grey"},attrs:{text:"",icon:"",color:"text"},on:{click:t.onNext}},[a("v-icon",[t._v("mdi-chevron-right")])],1)]},proxy:!0}],null,!0),model:{value:t.pickedString,callback:function(e){t.pickedString=e},expression:"pickedString"}},s))]}}]),model:{value:t.calenderMenu,callback:function(e){t.calenderMenu=e},expression:"calenderMenu"}},[t._v(" "),a("v-card",[a("v-card-text",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"py-0",staticStyle:{"border-right":"1px solid #e6e6e6"},attrs:{cols:"12",sm:"8"}},[a("v-date-picker",{staticStyle:{"box-shadow":"none"},attrs:{"no-title":"",success:"",landscape:"",max:t.max,range:t.range,"show-current":t.showCurrent,"full-width":""},on:{change:t.onChange},model:{value:t.pickers,callback:function(e){t.pickers=e},expression:"pickers"}}),t._v(" "),a("v-layout",[a("v-row",{staticClass:"px-3"},[a("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-calendar",label:t.$t("Start date"),id:"start_date",title:t.$t("Start date"),readonly:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),t._v(" "),a("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-calendar",label:t.$t("End date"),id:"end_date",title:t.$t("End date"),readonly:""},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1)],1)],1),t._v(" "),a("v-col",{staticClass:"pa-0 d-none d-lg-block d-md-block d-md-flex",attrs:{cols:"12",sm:"4"}},[a("v-list",{attrs:{dense:""}},[a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.rangeSidebar,callback:function(e){t.rangeSidebar=e},expression:"rangeSidebar"}},t._l(t.rangeSidebars,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.onSelectRange(e)}}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)})),1)],1)],1)],1),t._v(" "),a("v-divider",{staticClass:"pa-0 ma-0"})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{text:"",color:"black"},on:{click:t.onCancel}},[t._v("CANCEL")]),t._v(" "),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.onDone}},[t._v("DONE")])],1)],1)],1)],1),t._v(" "),a("v-col",{staticStyle:{"max-height":"60px"},attrs:{cols:"12",lg:"3",sm:"12"}},[a("v-select",{attrs:{items:t.locations,label:"Select location","item-text":"name","item-value":"id",solo:""},on:{change:t.fetchReports},model:{value:t.location,callback:function(e){t.location=e},expression:"location"}})],1),t._v(" "),a("v-col",{staticStyle:{"max-height":"60px"},attrs:{cols:"12",lg:"3",sm:"12"}},[a("v-select",{attrs:{items:t.users,label:"Select user","item-text":"name","item-value":"id",solo:""},on:{change:t.fetchReports},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),t._v(" "),a("v-col",{staticStyle:{"max-height":"60px"},attrs:{cols:"12",lg:"2",sm:"12"}},[a("v-select",{attrs:{solo:"",items:t.types,label:"Chart Type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",lg:"12"}},[a("v-card",[a("v-tabs",{on:{change:t.fetchReports},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},t._l(t.tabTypes,(function(e,s){return a("v-tab",{key:s},[t._v("\n                        "+t._s(t.$t(e).toUpperCase())+"\n                    ")])})),1),t._v(" "),a("v-card-text",[a("line-chart",{directives:[{name:"show",rawName:"v-show",value:"LINE"==t.type,expression:"type == 'LINE'"}],attrs:{height:150,"chart-data":t.datas}}),t._v(" "),a("bar-chart",{directives:[{name:"show",rawName:"v-show",value:"BAR"==t.type,expression:"type == 'BAR'"}],attrs:{height:150,"chart-data":t.datas}})],1)],1)],1),t._v(" "),a("v-col",{attrs:{cols:"12",lg:"6"}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[t._v("\n                    "+t._s(t.$t("users"))+"\n                ")]),t._v(" "),a("v-card-text",[a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.name"))+"\n                                    ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.email"))+"\n                                    ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.phone"))+"\n                                    ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.created_at"))+"\n                                    ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.updated_at"))+"\n                                    ")])])]),t._v(" "),a("tbody",t._l(t.lastestUsers,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.phone))]),t._v(" "),a("td",[t._v(t._s(e.created_at?t.moment(e.created_at).format("YYYY-MM-DD"):""))]),t._v(" "),a("td",[t._v(t._s(e.updated_at?t.moment(e.updated_at).format("YYYY-MM-DD"):""))])])})),0)]},proxy:!0}])})],1)],1)],1),t._v(" "),a("v-col",{attrs:{cols:"12",lg:"6"}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[t._v("\n                    "+t._s(t.$t("clients"))+"\n                ")]),t._v(" "),a("v-card-text",[a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.name"))+"\n                                    ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.email"))+"\n                                    ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.phone"))+"\n                                    ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.created_at"))+"\n                                    ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                                        "+t._s(t.$t("form.updated_at"))+"\n                                    ")])])]),t._v(" "),a("tbody",t._l(t.lastestClients,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.phone))]),t._v(" "),a("td",[t._v(t._s(e.created_at?t.moment(e.created_at).format("YYYY-MM-DD"):""))]),t._v(" "),a("td",[t._v(t._s(e.updated_at?t.moment(e.updated_at).format("YYYY-MM-DD"):""))])])})),0)]},proxy:!0}])})],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=N.exports;m()(N,{VApp:p.a,VBtn:_.a,VCard:Y.a,VCardActions:D.a,VCardText:D.b,VCardTitle:D.c,VCol:x.a,VDatePicker:g.a,VDivider:b.a,VIcon:M.a,VLayout:y.a,VList:k.a,VListItem:C.a,VListItemContent:S.a,VListItemGroup:w.a,VListItemTitle:S.c,VMenu:$.a,VRow:L.a,VSelect:V.a,VSimpleTable:T.a,VSpacer:O.a,VTab:R.a,VTabs:A.a,VTextField:I.a})},76:function(t,e,a){"use strict";var s=a(16),n=s.i.reactiveProp,o={extends:s.a,mixins:[n],props:["chartData","options"],mounted:function(){this.renderChart(this.chartData,this.options)}},r=a(6),i=Object(r.a)(o,void 0,void 0,!1,null,null,null);e.a=i.exports},77:function(t,e,a){"use strict";var s=a(16),n=s.i.reactiveProp,o={extends:s.d,mixins:[n],props:["chartData","options"],mounted:function(){this.renderChart(this.chartData,this.options)}},r=a(6),i=Object(r.a)(o,void 0,void 0,!1,null,null,null);e.a=i.exports}}]);